id: image_preprocessor
name: Image Preprocessor
category: infrastructure
subcategory: preprocessing

impl_type: python

inputs:
  image:
    dtype: uint8
    shape: ["H", "W", "C"]
    description: Input image (BGR or RGB)

outputs:
  processed:
    dtype: float32
    shape: ["H_out", "W_out", "C"]
    description: Preprocessed image (normalized, resized)

config_schema:
  target_size:
    type: array
    default: [640, 640]
    description: Target size [width, height]
  normalize:
    type: boolean
    default: true
    description: Normalize to [0, 1] range
  mean:
    type: array
    default: [0.485, 0.456, 0.406]
    description: Per-channel mean for normalization
  std:
    type: array
    default: [0.229, 0.224, 0.225]
    description: Per-channel std for normalization
  convert_rgb:
    type: boolean
    default: true
    description: Convert BGR to RGB

perf_profiles:
  - hardware_id: Jetson-Orin-Nano
    latency_ms: 1.5
    memory_mb: 20
    conditions: "1920x1080 to 640x640, GPU resize"
  - hardware_id: Jetson-Orin-AGX
    latency_ms: 0.5
    memory_mb: 20
    conditions: "1920x1080 to 640x640, GPU resize"

reference_hardware: Jetson-Orin-Nano
typical_latency_ms: 1.5
typical_memory_mb: 20

requires_gpu: false
python_deps:
  - opencv-python
  - numpy

tags:
  - preprocessing
  - image-resize
  - normalization

last_updated: "2024-12-30"
